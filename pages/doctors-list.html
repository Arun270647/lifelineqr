<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctors List - LifeLine QR</title>

    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/pages.css">
</head>

<body>
    <nav class="navbar">
        <div class="container">
            <a href="../index.html" class="navbar-brand">
                <span class="medical-icon">+</span>
                LifeLine QR
            </a>
            <ul class="navbar-menu">
                <li><a href="../index.html">Home</a></li>
                <li><a href="./doctors-list.html">Doctors</a></li>
                <li><a href="./contact.html">Contact</a></li>
            </ul>
        </div>
    </nav>

    <section class="features">
        <div class="container">
            <h1 class="text-center">Registered Doctors</h1>
            <p class="text-center text-muted mb-4">Find medical professionals registered with LifeLine QR</p>

            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search by name or specialization...">
            </div>

            <div id="doctorsGrid" class="doctors-grid"></div>

            <div id="emptyState" class="empty-state hidden">
                <div class="empty-state-icon">üë®‚Äç‚öïÔ∏è</div>
                <h3>No Doctors Found</h3>
                <p>No doctors match your search criteria</p>
            </div>
        </div>
    </section>

    <script src="../js/config.js"></script>
    <script src="../js/storage.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/router.js"></script>
    <script src="../js/main.js"></script>

    <script>
        let allDoctors = [];

        // Load all doctors
        function loadDoctors() {
            allDoctors = UserStorage.getAllDoctors();
            displayDoctors(allDoctors);
        }

        // Display doctors
        function displayDoctors(doctors) {
            const grid = document.getElementById('doctorsGrid');
            const emptyState = document.getElementById('emptyState');

            if (doctors.length === 0) {
                grid.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');

            grid.innerHTML = doctors.map(doctor => {
                const initials = doctor.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();

                return `
                    <div class="doctor-card">
                        <div class="doctor-header">
                            <div class="doctor-avatar">${initials}</div>
                            <div class="doctor-info">
                                <h4>${doctor.name}</h4>
                                <span class="badge">${doctor.specialization}</span>
                            </div>
                        </div>
                        <div class="doctor-details">
                            <div class="doctor-detail">
                                <span>üè•</span>
                                <span>${doctor.hospital}</span>
                            </div>
                            <div class="doctor-detail">
                                <span>üìû</span>
                                <span>${doctor.contactNumber}</span>
                            </div>
                            <div class="doctor-detail">
                                <span>‚è∞</span>
                                <span>${doctor.workingHours}</span>
                            </div>
                            <div class="doctor-detail">
                                <span>üìÖ</span>
                                <span>${doctor.experience} years experience</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Search doctors
        function searchDoctors(query) {
            const filtered = allDoctors.filter(doctor => {
                const searchStr = query.toLowerCase();
                return doctor.name.toLowerCase().includes(searchStr) ||
                    doctor.specialization.toLowerCase().includes(searchStr) ||
                    doctor.hospital.toLowerCase().includes(searchStr);
            });

            displayDoctors(filtered);
        }

        // Setup search
        document.getElementById('searchInput').addEventListener('input', function (e) {
            searchDoctors(e.target.value);
        });

        // Initialize
        loadDoctors();
    </script>
</body>

</html>